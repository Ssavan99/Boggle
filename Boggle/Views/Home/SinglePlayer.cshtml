@using Boggle.Controllers
@using Microsoft.AspNetCore.Http

@{
    var inputWord = "";
    if (HttpMethods.IsPost(@Context.Request.Method))
    {
        inputWord = @Context.Request.Query["input-word"];

    }
}

@{
    GameController h = new GameController();
    Game g = new Game();
    User u = new User("u");
    Board b = g.getBoard();
    Die[,] d = b.shakeForNewBoard();
    b.setDice(d);

    
}


@{
    ViewData["Title"] = "Single Player";
}
<h2>Single Player</h2>

<div class="text-center">
    <h1 class="display-4">Welcome to Boggle</h1>
    <p>Learn how to play <a href="https://www.hasbro.com/common/instruct/boggle.pdf" target="_blank">here!</a> (Opens in new tab)</p>
</div>

<script>
    // Add products to <table>
    function wordsUpdate() {
        if ($("#p1-score-table").val() != null && $("#input-word").val() != '') {
            var wordPoints = getPoints();
            // Add product to Table
            wordAddToTable(wordPoints);

            // Clear form fields
            formClear();

            // Focus to product name field
            $("#input-word").focus();
        }
    }
    function wordAddToTable(wordPoints) {
        // First check if a <tbody> tag exists, add one if not
        if ($("#p1-score-table tbody").length == 0) {
            $("#p1-score-table").append("<tbody></tbody>");
        }

        // Append product to the table
        $("#p1-score-table tbody").append("<tr>" +
            "<td>" + $("#input-word").val() + "</td>" +
            "<td>" + wordPoints + "</td>" +
            "</tr>");
    }
    function formClear() {
        $("#input-word").val("");
    }
    function getPoints() {
        var wordPoints = 0;
        if ($("#input-word").length < 5) {
            wordPoints = 1;
        }
        if ($("#input-word").length == 5) {
            wordPoints = 2;
        }
        if ($("#input-word").length == 6) {
            wordPoints = 3;
        }
        if ($("#input-word").length == 7) {
            wordPoints = 5;
        }
        if ($("#input-word").length >= 8) {
            wordPoints = 11;
        }
        return wordPoints;
    }
</script>


<!doctype html>
<div id="boggle-container">
    <img src="/images/logo.png" class="logo" />
    <div id="board">
        <div class="row">
            <div class="boggle">
                <span>@Html.Label(b.getDie(0, 0).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(0, 1).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(0, 2).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(0, 3).getUpLetter())</span>
            </div>
        </div>
        <div class="row">
            <div class="boggle">
                <span>@Html.Label(b.getDie(1, 0).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(1, 1).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(1, 2).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(1, 3).getUpLetter())</span>
            </div>
        </div>
        <div class="row">
            <div class="boggle">
                <span>@Html.Label(b.getDie(2, 0).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(2, 1).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(2, 2).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(2, 3).getUpLetter())</span>
            </div>
        </div>
        <div class="row">
            <div class="boggle">
                <span>@Html.Label(b.getDie(3, 0).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(3, 1).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(3, 2).getUpLetter())</span>
            </div>
            <div class="boggle">
                <span>@Html.Label(b.getDie(3, 3).getUpLetter())</span>
            </div>
        </div>
    </div>

    <div id="submit-word">
        <form>
            <label for="input-word"><strong>Current Word</strong></label><br>
            <input type='text' id="input-word" name="input-word">
            <button type="button" id="updateButton" class="btn btn-primary" onclick="wordsUpdate();">Submit Word</button>
        </form>
    </div>
    <table id="p1-score-table">
        <tr id=header>
            <td>Player One</td>
        </tr>
        <tr>
            <th>Word </th>
            <th>Score</th>
        </tr>
    </table>
</div>

<style>
    body {
        background-color: yellowgreen;
        font-family: Arial, Helvetica, sans-serif;
    }

    #boggle-container {
        display: flex;
        flex-direction: column;
        width: 490px;
        margin: 0 auto;
    }

    .logo {
        align-self: center;
    }

    #board {
        background-color: #A9A9A9;
        padding: 5px;
        margin-top: 20px;
    }

    .row {
        display: flex;
        text-align: center;
        flex-direction: row;
        padding: 5px;
    }

    .boggle:hover {
        cursor: pointer;
    }

    .boggle {
        width: 80px;
        height: 80px;
        border-radius: 5px;
        background-color: #ffffff;
        flex: 1 1 auto;
        margin: 5px;
    }

        .boggle.selected {
            background-color: #ACCEEC;
        }

        .boggle span {
            font-weight: bold;
            display: block;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
        }

    #submit-word {
        background-color: aqua;
        margin: 15px 0;
        padding: 15px;
        display: flex;
        justify-content: space-between;
    }

    #p1-score-table tr#header td {
        background-color: rgb(248, 96, 129);
    }

    #p1-score-table {
        /* ReSharper disable once InvalidValue */
        align-self: left;
        border: 5px solid #FFCA08;
        border-collapse: collapse;
        text-align: left;
    }

        #p1-score-table td, #p1-score-table th {
            border: 5px solid #FFCA08;
            background-color: white;
            padding: 5px;
        }

        #p1-score-table tr#footer td {
            background-color: #ACCEEC;
        }
</style>